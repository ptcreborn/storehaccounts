<style>
/* CSS */
.button-15 {
  background-image: linear-gradient(#42A1EC, #0070C9);
  border: 1px solid #0077CC;
  border-radius: 4px;
  box-sizing: border-box;
  color: #FFFFFF;
  cursor: pointer;
  direction: ltr;
  display: block;
  font-family: "SF Pro Text","SF Pro Icons","AOS Icons","Helvetica Neue",Helvetica,Arial,sans-serif;
  font-size: 17px;
  font-weight: 400;
  letter-spacing: -.022em;
  line-height: 1.47059;
  min-width: 30px;
  overflow: visible;
  padding: 4px 15px;
  text-align: center;
  vertical-align: baseline;
  user-select: none;
  -webkit-user-select: none;
  touch-action: manipulation;
  white-space: nowrap;
}

.button-15:disabled {
  cursor: default;
  opacity: .3;
}

.button-15:hover {
  background-image: linear-gradient(#51A9EE, #147BCD);
  border-color: #1482D0;
  text-decoration: none;
}

.button-15:active {
  background-image: linear-gradient(#3D94D9, #0067B9);
  border-color: #006DBC;
  outline: none;
}

.button-15:focus {
  box-shadow: rgba(131, 192, 253, 0.5) 0 0 0 3px;
  outline: none;
}
  
.inputbox_style {
  color: white;
  background: black;
  border: 1px solid rgba(255,255,255,0.6);
  min-width: 90%;
  font-size: 24px;
}
</style>

<script src='https://rawcdn.githack.com/ptcreborn/storehaccounts/1d0c70958743968b3684180c64c04f041789fc99/tinyURLShortener.js' defer='defer'></script>

<small>Enter Link below</small><br>
<input class='inputbox_style' placeholder='enter link here...' id='link'/>
<br><br>
<small>Enter Number of Ads below</small><br>
<input class='inputbox_style' placeholder='number of ads here...' value='7' id='ads'/>
<br><br>
<button class="button-15" role="button" onclick='shortenUrl();'>Generate</button>

<br>
<textarea class='inputbox_style' id='output'></textarea>
<div id='output_prev'></div>
<br>
<br>
<h4 id='status'></h4>

<script>
  function query(id) {
   return document.getElementById(id); 
  }
  
  
  // enter the number of ads
  async function shortenUrl() {
    let url = query('link').value;
    let numAds = query('ads').value;
    
    let host = new URL(url).hostname;
    let next_url = url;
    let title = 'Download via ' + host;
    
    // format of the url storehaccounts + encrypted target link + | + 1/7
    
    for(let i=numAds; i>0; i--) {
     	console.log(btoa(i + '/' + numAds)); 
      	
      	next_url = await tinyURLShortener.shortenUrl('https://storehaccounts.blogspot.com/p/link-terminal.html#' + btoa(next_url) + '|' + btoa(i + '/' + numAds));
      
      	console.log(next_url);
      
      	query('status').innerText = 'compressing... ' + i;
    }
    
    query('output').value = "<button class='button-15' role='button' onclick='window.location.href=\"" + next_url + "\"'>" + title + "</button>";
    query('output_prev').innerHTML = "<button class='button-15' role='button' onclick='window.location.href=\"" + next_url + "\"'>" + title + "</button>";
    
    
  	navigator.clipboard.writeText("<button class='button-15' role='button' onclick='window.location.href=\"" + next_url + "\"'>" + title + "</button>");
    
    query('status').innerText = 'copied!';
  }
</script>
